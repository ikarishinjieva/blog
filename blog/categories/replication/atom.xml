<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: replication | Tac say]]></title>
  <link href="http://ikarishinjieva.github.com/blog/blog/categories/replication/atom.xml" rel="self"/>
  <link href="http://ikarishinjieva.github.com/blog/"/>
  <updated>2013-10-11T21:46:29+08:00</updated>
  <id>http://ikarishinjieva.github.com/blog/</id>
  <author>
    <name><![CDATA[Tac Huang (ikari_shinji@github)]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[mysql 5.6.15 replication中碰到的死锁]]></title>
    <link href="http://ikarishinjieva.github.com/blog/blog/2013/10/11/hole-in-mysql-56-replication-dead-lock/"/>
    <updated>2013-10-11T21:21:00+08:00</updated>
    <id>http://ikarishinjieva.github.com/blog/blog/2013/10/11/hole-in-mysql-56-replication-dead-lock</id>
    <content type="html"><![CDATA[<p>简述下今天在mysql 5.6.15上碰到的土亢</p>

<h1>现象</h1>

<p>mysql开启主从复制时，用meb（MySQL Enterprise Backup）做备份会卡住。同时在slave上show slave status也会卡住。</p>

<p>查看slave上show processlist，可以看到sql thread的状态为 "Waiting for commit lock"</p>

<h1>猜测</h1>

<p>无论是"SHOW ENGINE INNODB STATUS"还是"SHOW OPEN TABLES"都没有提供有用的信息，还是一切靠猜</p>

<p>夜观天象猜到mysql存在bug <a href="http://bugs.mysql.com/bug.php?id=70307">"Another deadlock on FLUSH TABLES WITH READ LOCK + SHOW SLAVE STATUS"</a></p>

<p>其中描述了sql thread开始执行了transaction，但是没有commit的间隙，在slave上FLUSH TABLES WITH READ LOCK，会出现死锁</p>

<p>于是猜测，如果meb恰好在slave上某个transaction commit之前做了FLUSH TABLES WITH READ LOCK，然后调用了与"SHOW SLAVE STATUS"类似的机制获取slave info，那么就会如bug所述卡住。然后mysql由于TABLE LOCk的存在，sql thread也就会卡住。</p>

<p>BTW：搜一下mysql bug库，会有一些描述类似的bug，其中70307描述最靠谱，且有详细的<a href="http://bugs.mysql.com/file.php?id=20542">重现步骤</a>，我也成功在mysql 5.6.15上重现了bug。</p>

<h1>结果</h1>

<p>实验后证明猜对了...</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[实验：Mysql master-slave-standby将source从master切换到standby]]></title>
    <link href="http://ikarishinjieva.github.com/blog/blog/2013/05/15/mysql-master-slave-standby-failover/"/>
    <updated>2013-05-15T22:40:00+08:00</updated>
    <id>http://ikarishinjieva.github.com/blog/blog/2013/05/15/mysql-master-slave-standby-failover</id>
    <content type="html"><![CDATA[<p>尝试了&lt;Mysql High Availability&gt;第四章热备份一节的实验,记录步骤.</p>

<p>先统一原语,master/slave/standby表示三台机器名,source/target代表replication关系的两端（不适用master/slave用以和机器名区分）."master(3)"表示master机器的db里有三条数据1,2,3.</p>

<p>实验开始.</p>

<ol>
<li>初始状态是存在master->slave, master->standby的replication</li>
<li>standby在切换成source时,需要有bin-log和replication user. 在此重新设置master->standby的replication, 让standby满足要求.</li>
</ol>


<p>忽略replication user的部分.</p>

<p>bin-log的部分在my.cnf里要设置log-bin和log-slave-updates(默认情况下,master->standby的replication不会写standby的bin-log,需开始standby的log-slave-updates才会写).</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>server-id               = 3
</span><span class='line'>log_bin                 = /var/log/mysql/mysql-bin.log
</span><span class='line'>...
</span><span class='line'>relay-log-index         = /var/log/mysql/slave-relay-bin.index
</span><span class='line'>relay-log               = /var/log/mysql/slave-relay-bin
</span><span class='line'>log-slave-updates</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>测试一下standby binlog设置成功。可以在master插入一条数据，在standby查看</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>standby> show binlog events;
</span><span class='line'>+------------------+------+-------------+-----------+-------------+------------------------------------------------------------------------+
</span><span class='line'>| Log_name         | Pos  | Event_type  | Server_id | End_log_pos | Info                                                                   |
</span><span class='line'>+------------------+------+-------------+-----------+-------------+------------------------------------------------------------------------+
</span><span class='line'>| mysql-bin.000001 |    4 | Format_desc |         3 |         107 | Server ver: 5.5.31-0ubuntu0.12.04.1-log, Binlog ver: 4                 |
</span><span class='line'>| mysql-bin.000001 |  107 | Query       |         1 |         166 | BEGIN                                                                  |
</span><span class='line'>| mysql-bin.000001 |  166 | Query       |         1 |         257 | use &lt;code>tac&lt;/code>; insert into test values(8889)                               |
</span><span class='line'>| mysql-bin.000001 |  257 | Xid         |         1 |         284 | COMMIT /&lt;em> xid=111 &lt;/em>/  &lt;br/>
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>将replication调整至状态master(3),standby(2),slave(1). 人工造成各db的状态不一致</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>master> insert into test values(1);
</span><span class='line'>slave> stop slave;
</span><span class='line'>master> insert into test values(2);
</span><span class='line'>standby> stop slave;
</span><span class='line'>master> insert into test values(3);</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li><p>想象此时master挂掉,开始将source从master切换成standby</p></li>
<li><p>在建立standby->slave的replication之前，需要将standby和slave数据同步(此时slave落后于standby)。</p></li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 先查看standby从master拿了多少数据
</span><span class='line'>standby> show slave status \G
</span><span class='line'>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;em> 1. row &lt;/em>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>
</span><span class='line'>...&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>    Master_Log_File: master-bin.000023
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>...&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>    Exec_Master_Log_Pos: 1391
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>-- 让slave从master上同步到跟standby同样的位置
</span><span class='line'>slave> start slave until master_log_file = 'master-bin.000023', master_log_pos = 1391;</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>有意思的是此处用了master(其实我们假设master已经坏了...)。</p>

<ol>
<li>此时可以讲slave的source从master切换到standby. 一个问题就是standby->slave的开始位置可能是和master->slave不同</li>
</ol>


<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 查看standby binlog的当前位置
</span><span class='line'>mysql> show master status \G
</span><span class='line'>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;strong>&lt;em> 1. row &lt;/em>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/strong>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>File: mysql-bin.000001 
</span><span class='line'>Position: 796
</span><span class='line'>Binlog_Do_DB:
</span><span class='line'>Binlog_Ignore_DB:
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>-- 注意与master上的文件名和位置都不同&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>-- 切换slave的source
</span><span class='line'>slave> change master to&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>          master_host = '192.168.50.4', 
</span><span class='line'>          master_port = 3306, 
</span><span class='line'>          master_user = 'repl', 
</span><span class='line'>          master_password = 'repl', 
</span><span class='line'>          master_log_file = 'mysql-bin.000001', 
</span><span class='line'>          master_log_pos = 796;
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>测试一下standby->slave replication.</li>
</ol>


<p>总的思路就是讲master(3),standby(2),slave(1)同步成master(3),standby(2),slave(2),然后将master->slave切换成standby->slave.</p>

<p>遗留了两个问题,其一是slave和standby同步时使用了"坏掉"的master;其二是master超前了standby和slave, 也就是standby->slave丢失了master的超前数据。留待慢慢学习。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[关于Mysql binlog的一点学习]]></title>
    <link href="http://ikarishinjieva.github.com/blog/blog/2013/05/12/mysql-binlog-study/"/>
    <updated>2013-05-12T22:59:00+08:00</updated>
    <id>http://ikarishinjieva.github.com/blog/blog/2013/05/12/mysql-binlog-study</id>
    <content type="html"><![CDATA[<p>差不多一个月没更新了。除了忙些琐事，就是偷点懒。</p>

<p>在读&lt;Mysql High Availability&gt;，扫了一遍，读第二遍的时候开始做些实验，所以这之后的blog写的也会没什么章法。</p>

<p>&lt;Mysql High Availability&gt;第三章介绍binlog时特地提到了Rand()/Now()/User variable/Password()在基于sql复制时的行为，简单做些实验。</p>

<ol>
<li>Rand()</li>
</ol>


<p>Rand() 在replication中，值会被正确传递。如下查看binlog，发现pos 209处rand_seed会被传给slave，保证rand生成的值保持一致。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql> show binlog events in 'master-bin.000007';
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>| Log_name          | Pos | Event_type  | Server_id | End_log_pos | Info                                                   |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>| master-bin.000007 |   4 | Format_desc |         1 |         107 | Server ver: 5.5.31-0ubuntu0.12.04.1-log, Binlog ver: 4 |
</span><span class='line'>| master-bin.000007 | 107 | Query       |         1 |         174 | BEGIN                                                  |
</span><span class='line'>| master-bin.000007 | 174 | RAND        |         1 |         209 | rand_seed1=598597315,rand_seed2=24268577               |
</span><span class='line'>| master-bin.000007 | 209 | Query       |         1 |         302 | use &lt;code>tac&lt;/code>; insert into test values(rand())             |
</span><span class='line'>| master-bin.000007 | 302 | Xid         |         1 |         329 | COMMIT /&lt;em> xid=151 &lt;/em>/                                   |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>Now()</li>
</ol>


<p>Now() 在replication中，值会被正确传递。如下查看binlog，pos 283处，貌似这个语句传给slave，会由于master和slave的时间不同步，导致问题。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code> master&gt; flush logs;
</span><span class='line'> master&gt; SET TIMESTAMP=unix_timestamp('2010-10-01 12:00:00');
</span><span class='line'> master&gt; insert into test values(now());
</span><span class='line'> master&gt; show binlog events in 'master-bin.000007';
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>| Log_name          | Pos | Event_type  | Server_id | End_log_pos | Info                                                   |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>| master-bin.000012 |   4 | Format_desc |         1 |         107 | Server ver: 5.5.31-0ubuntu0.12.04.1-log, Binlog ver: 4 |
</span><span class='line'>| master-bin.000012 | 107 | Query       |         1 |         182 | BEGIN                                                  |
</span><span class='line'>| master-bin.000012 | 182 | Query       |         1 |         283 | use &lt;code>tac&lt;/code>; insert into test values (now())             |
</span><span class='line'>| master-bin.000012 | 283 | Xid         |         1 |         310 | COMMIT /&lt;em> xid=131 &lt;/em>/                                   |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>但通过mysqladmin查看binlog，可以看到binlog中会不断插入TIMESTAMP来保证now()函数的执行结果在master和slave是相同的。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>master> sudo mysqlbinlog --short-form master-bin.000017
</span><span class='line'>...
</span><span class='line'>DELIMITER /&lt;em>!&lt;/em>/;
</span><span class='line'>SET TIMESTAMP=1285934400/&lt;em>!&lt;/em>/;
</span><span class='line'>...
</span><span class='line'>BEGIN
</span><span class='line'>/&lt;em>!&lt;/em>/;
</span><span class='line'>use &lt;code>tac&lt;/code>/&lt;em>!&lt;/em>/;
</span><span class='line'>SET TIMESTAMP=1285934400/&lt;em>!&lt;/em>/;
</span><span class='line'>insert into test values(now())
</span><span class='line'>/&lt;em>!&lt;/em>/;
</span><span class='line'>COMMIT/&lt;em>!&lt;/em>/;
</span><span class='line'>SET TIMESTAMP=1368372377/&lt;em>!&lt;/em>/;
</span><span class='line'>BEGIN
</span><span class='line'>/&lt;em>!&lt;/em>/;
</span><span class='line'>SET TIMESTAMP=1368372377/&lt;em>!&lt;/em>/;
</span><span class='line'>insert into test values(now())
</span><span class='line'>/&lt;em>!&lt;/em>/;
</span><span class='line'>COMMIT/&lt;em>!&lt;/em>/;
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>User variable</li>
</ol>


<p>User variable会被编码成十六进制串，含义不明，保密性不明。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql> flush logs;
</span><span class='line'>Query OK, 0 rows affected (0.02 sec)&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>mysql> set @foo = now();
</span><span class='line'>Query OK, 0 rows affected (0.00 sec)&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>mysql> insert into test values (@foo);
</span><span class='line'>Query OK, 1 row affected (0.01 sec)&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>mysql> show binlog events in 'master-bin.000014';
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+-----------------------------------------------------------------------------------+
</span><span class='line'>| Log_name          | Pos | Event_type  | Server_id | End_log_pos | Info                                                                              |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+-----------------------------------------------------------------------------------+
</span><span class='line'>| master-bin.000014 |   4 | Format_desc |         1 |         107 | Server ver: 5.5.31-0ubuntu0.12.04.1-log, Binlog ver: 4                            |
</span><span class='line'>| master-bin.000014 | 107 | Query       |         1 |         174 | BEGIN                                                                             |
</span><span class='line'>| master-bin.000014 | 174 | User var    |         1 |         229 | @&lt;code>foo&lt;/code>=_latin1 0x323031302D31302D30312031323A30303A3030 COLLATE latin1_swedish_ci |
</span><span class='line'>| master-bin.000014 | 229 | Query       |         1 |         321 | use &lt;code>tac&lt;/code>; insert into test values (@foo)                                         |
</span><span class='line'>| master-bin.000014 | 321 | Xid         |         1 |         348 | COMMIT /&lt;em> xid=148 &lt;/em>/                                                              |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+-----------------------------------------------------------------------------------+
</span><span class='line'>5 rows in set (0.00 sec)</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<ol>
<li>Password()</li>
</ol>


<p>直接内嵌使用password，会在binlog里暴露密码，就像下面的测试。可以使用user variable,但是不知道user variable的编码保密性如何。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql> insert into test values(password('tac'));
</span><span class='line'>mysql> show binlog events in 'master-bin.000015';
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>| Log_name          | Pos | Event_type  | Server_id | End_log_pos | Info                                                   |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>| master-bin.000015 |   4 | Format_desc |         1 |         107 | Server ver: 5.5.31-0ubuntu0.12.04.1-log, Binlog ver: 4 |
</span><span class='line'>| master-bin.000015 | 107 | Query       |         1 |         174 | BEGIN                                                  |
</span><span class='line'>| master-bin.000015 | 174 | Query       |         1 |         276 | use &lt;code>tac&lt;/code>; insert into test values(password('tac'))    |
</span><span class='line'>| master-bin.000015 | 276 | Xid         |         1 |         303 | COMMIT /&lt;em> xid=158 &lt;/em>/                                   |
</span><span class='line'>+-------------------+-----+-------------+-----------+-------------+--------------------------------------------------------+
</span><span class='line'>4 rows in set (0.01 sec)</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>简单一点学习如上。</p>
]]></content>
  </entry>
  
</feed>
